(this["webpackJsonptravel-agent-front"]=this["webpackJsonptravel-agent-front"]||[]).push([[0],{32:function(e,a,t){e.exports=t(62)},37:function(e,a,t){},39:function(e,a,t){},62:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(28),c=t.n(r),o=(t(37),t(8)),s=t.n(o),i=(t(38),t(29)),u=t.n(i),m=t(9),p=t(10),d=t(12),h=t(13),k=(t(39),t(1)),v=t(11),f=t(30),g=t(5),E=t(7),b=t.n(E),N="https://alambic.herokuapp.com/api";b.a.defaults.withCredentials=!0;var w=function(e){return b.a.post("".concat(N,"/login"),e)},y=function(e){return b.a.post("".concat(N,"/signup"),e)},x=function(){return b.a.post("".concat(N,"/logout"))},C=Object(n.createContext)(),O=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"check",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"top-right";s.a.notification({message:"<span uk-icon='icon: ".concat(t,"'></span> ").concat(e),status:a,pos:n})},S=function(e){Object(h.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=a.call.apply(a,[this].concat(l))).state={user:{}},e.handleChange=function(a){var t=e.state.user;t=Object(f.a)({},t,Object(v.a)({},a.target.name,a.target.value)),e.setState({user:t})},e.handleSubmit=function(a){a.preventDefault();var t="/login"===e.props.location.pathname,n=e.context.setUser,l=e.state.user,r=t?w:y,c=e.props.history,o=t?"/":"/login";r(l).then((function(e){if(t){var a=e.data.user;localStorage.setItem("user",JSON.stringify(a)),n(a)}c.push(o)})).catch((function(e){console.log(e),O(e.response.data.msg,"danger","close")}))},e}return Object(p.a)(t,[{key:"render",value:function(){var e="/login"===this.props.location.pathname;return l.a.createElement("section",{className:"uk-section"},l.a.createElement("div",{className:"uk-container uk-flex uk-flex-center"},l.a.createElement("div",{className:"uk-width-1-4"},l.a.createElement("h3",null,e?"Login":"Signup"),l.a.createElement("form",{onSubmit:this.handleSubmit,className:"uk-width-1-1 uk-form-stacked uk-flex uk-flex-center uk-flex-column"},e?null:l.a.createElement("div",null,l.a.createElement("div",{className:"uk-margin"},l.a.createElement("label",{className:"uk-form-label",htmlFor:"name"},"Name:"),l.a.createElement("div",{className:"uk-inline"},l.a.createElement("span",{className:"uk-form-icon uk-form-icon-flip","uk-icon":"icon: user"}),l.a.createElement("input",{onChange:this.handleChange,id:"name",name:"name",className:"uk-input",type:"text",required:!0}))),l.a.createElement("div",null,l.a.createElement("label",{className:"uk-form-label",htmlFor:"last_name"},"Last name:"),l.a.createElement("div",{className:"uk-inline"},l.a.createElement("span",{className:"uk-form-icon uk-form-icon-flip","uk-icon":"icon: user"}),l.a.createElement("input",{onChange:this.handleChange,id:"last_name",name:"last_name",className:"uk-input",type:"text",required:!0})))),l.a.createElement("div",{className:"uk-margin"},l.a.createElement("label",{className:"uk-form-label",htmlFor:"email"},"Email:"),l.a.createElement("div",{className:"uk-inline"},l.a.createElement("span",{className:"uk-form-icon uk-form-icon-flip","uk-icon":"icon: mail"}),l.a.createElement("input",{onChange:this.handleChange,id:"email",name:"email",className:"uk-input",type:"email",required:!0})),l.a.createElement("div",{className:"uk-margin"},l.a.createElement("label",{className:"uk-form-label",htmlFor:"password"},"Password:"),l.a.createElement("div",{className:"uk-inline"},l.a.createElement("span",{className:"uk-form-icon uk-form-icon-flip","uk-icon":"icon: lock"}),l.a.createElement("input",{onChange:this.handleChange,id:"password",name:"password",className:"uk-input",type:"password",required:!0})))),e?l.a.createElement("div",{className:"uk-text-meta"},"Don't have an account?"," ",l.a.createElement(g.b,{className:"uk-text-primary",to:"/signup"},"Sign up")):null,l.a.createElement("button",{className:"uk-button uk-button-primary"},e?"Login":"Signup")))))}}]),t}(n.Component);S.contextType=C;var j=S,L=function(){return l.a.createElement(k.c,null,l.a.createElement(k.a,{exact:!0,path:"/login",component:j}),l.a.createElement(k.a,{exact:!0,path:"/signup",component:j}))},q=function(e){var a=e.user,t=e.logout;return l.a.createElement("header",null,l.a.createElement("nav",{className:"uk-navbar-container","uk-navbar":"true"},l.a.createElement("div",{className:"uk-navbar-left"},l.a.createElement("ul",{className:"uk-navbar-nav"},l.a.createElement("li",{className:"uk-active"},l.a.createElement(g.b,{to:"/"},"Alambic")))),l.a.createElement("div",{className:"uk-navbar-right"},l.a.createElement("ul",{className:"uk-navbar-nav"},a._id?l.a.createElement("li",null,l.a.createElement(g.b,{to:"/profile"},l.a.createElement("div",{className:"uk-grid-small uk-flex-middle","uk-grid":"true"},l.a.createElement("div",{className:"uk-width-expand"},l.a.createElement("div",{className:"uk-margin-remove-bottom"},"Hi ",a.name,"!")))),l.a.createElement("div",{className:"uk-navbar-dropdown"},l.a.createElement("ul",{className:"uk-nav uk-navbar-dropdown-nav"},l.a.createElement("li",{onClick:t},"Logout")))):l.a.createElement("li",null,l.a.createElement(g.b,{to:"/login"},"Login"))))))},A=function(e){Object(h.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=a.call.apply(a,[this].concat(l))).state={user:JSON.parse(localStorage.getItem("user"))||{}},e.setUser=function(a){e.setState({user:a})},e.logout=function(){var a=e.props.history;x().then((function(){localStorage.removeItem("user"),e.setState({user:{}}),a.push("/login")}))},e}return Object(p.a)(t,[{key:"render",value:function(){var e=this.state,a=this.setUser,t=this.logout;return l.a.createElement(C.Provider,{value:{state:e,setUser:a,logout:t}},l.a.createElement("div",{className:"App"},l.a.createElement(q,{user:e.user,logout:t}),l.a.createElement(L,null)))}}]),t}(n.Component),F=Object(k.f)(A);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.use(u.a);var I=function(){return l.a.createElement(g.a,null,l.a.createElement(F,null))};c.a.render(l.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.2a492b7e.chunk.js.map